!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(self,()=>(()=>{"use strict";var e,t,n,r,o={531:(e,t)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.o=void 0;var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{colors:null,theme:null};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initThemes(),this.currentTheme=null,this.colors=t.colors||this.themes.greyscale,t.theme&&this.setColorTheme(t.theme)}var t,o,i;return t=e,i=[{key:"drawBg",value:function(e,t,n){t.fillStyle=n,t.fillRect(0,0,e.width,e.height)}},{key:"drawTextBg",value:function(e,t,n){t.fillStyle=n,t.fillRect(72,e.height-190,268,120)}},{key:"drawText",value:function(e,t,n,r){t.fillStyle=r,t.font="70px Arial",t.font="normal normal normal normal 15px/28px 'Helvetica Neue', Helvetica, Arial, sans-serif",t.font="small-caps bold 80px 'HelveticaNeue',Helvetica,Arial,sans-serif",t.textBaseline="middle",t.textAlign="end",t.fillText(n,320,e.height-190+60,240)}},{key:"drawIcon",value:function(e,t,n,r){t.save(),t.strokeStyle=n,r?(t.strokeStyle=r,t.lineWidth=20):t.lineWidth=1,t.miterLimit=4,t.scale(.75,.75);var o=.75*(e.width-.75*e.width),i=.75*(e.height-.75*e.height);t.translate(o,i),t.scale(1,1),t.save(),t.fillStyle=n||"#000000",t.beginPath(),t.moveTo(224,136),t.lineTo(224,0),t.lineTo(24,0),t.bezierCurveTo(10.7,0,0,10.7,0,24),t.lineTo(0,488),t.bezierCurveTo(0,501.3,10.7,512,24,512),t.lineTo(360,512),t.bezierCurveTo(373.3,512,384,501.3,384,488),t.lineTo(384,160),t.lineTo(248,160),t.bezierCurveTo(234.8,160,224,149.2,224,136),t.closePath(),t.moveTo(384,121.9),t.lineTo(384,128),t.lineTo(256,128),t.lineTo(256,0),t.lineTo(262.1,0),t.bezierCurveTo(268.5,0,274.6,2.5,279.1,7),t.lineTo(377,105),t.bezierCurveTo(381.5,109.5,384,115.6,384,121.9),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore()}},{key:"draw1",value:function(e,t){e.save(),e.strokeStyle="rgba(50,50,50,1)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=2,e.save(),e.fillStyle=t||"#000000",e.beginPath(),e.moveTo(369.9,97.9),e.lineTo(286,14),e.bezierCurveTo(277,5,264.8,-.1,252.1,-.1),e.lineTo(48,-.1),e.bezierCurveTo(21.5,0,0,21.5,0,48),e.lineTo(0,464),e.bezierCurveTo(0,490.5,21.5,512,48,512),e.lineTo(336,512),e.bezierCurveTo(362.5,512,384,490.5,384,464),e.lineTo(384,131.9),e.bezierCurveTo(384,119.2,378.9,106.9,369.9,97.9),e.closePath(),e.moveTo(332.1,128),e.lineTo(256,128),e.lineTo(256,51.9),e.lineTo(332.1,128),e.closePath(),e.moveTo(48,464),e.lineTo(48,48),e.lineTo(208,48),e.lineTo(208,152),e.bezierCurveTo(208,165.3,218.7,176,232,176),e.lineTo(336,176),e.lineTo(336,464),e.lineTo(48,464),e.closePath(),e.fill(),e.stroke(),e.restore(),e.restore()}}],(o=[{key:"initThemes",value:function(){this.themes={greyscale:{bg:"transparent",iconBg:"#92a5ab",textBg:"#6e7d82",text:"#FFFFFF"},black:{bg:"transparent",iconBg:"#000000",textBg:"#000000",text:"#FFFFFF"},white:{bg:"transparent",iconBg:"#ffffff",textBg:"#ffffff",text:"#000000"},red:{bg:"transparent",iconBg:"#be4646",textBg:"#901d1d",text:"#FFFFFF"},purple:{bg:"transparent",iconBg:"#a040b8",textBg:"#73178a",text:"#FFFFFF"},blue:{bg:"transparent",iconBg:"#2B73BA",textBg:"#00458F",text:"#FFFFFF"},lightBlue:{bg:"transparent",iconBg:"#54cbed",textBg:"#4198b3",text:"#FFFFFF"},green:{bg:"transparent",iconBg:"#00b36f",textBg:"#03763b",text:"#FFFFFF"},yellow:{bg:"transparent",iconBg:"#fed12e",textBg:"#bf9f30",text:"#FFFFFF"},orange:{bg:"transparent",iconBg:"coral",textBg:"rgba(0,0,0,0.1)",text:"#FFFFFF"},"greyscale-outline":{bg:"transparent",iconBg:"transparent",textBg:"transparent",text:"#6e7d82",outline:"#92a5ab"},"black-outline":{bg:"transparent",iconBg:"transparent",textBg:"transparent",text:"#000000",outline:"#000000"},"white-outline":{bg:"transparent",iconBg:"transparent",textBg:"transparent",text:"#FFFFFF",outline:"#FFFFFF"},"red-outline":{bg:"transparent",iconBg:"transparent",textBg:"transparent",text:"#be4646",outline:"#be4646"},"purple-outline":{bg:"transparent",iconBg:"transparent",textBg:"transparent",text:"#a040b8",outline:"#a040b8"},"blue-outline":{bg:"transparent",iconBg:"transparent",textBg:"transparent",text:"#2B73BA",outline:"#2B73BA"},"lightBlue-outline":{bg:"transparent",iconBg:"transparent",textBg:"transparent",text:"#54cbed",outline:"#54cbed"},"green-outline":{bg:"transparent",iconBg:"transparent",textBg:"transparent",text:"#00b36f",outline:"#00b36f"},"yellow-outline":{bg:"transparent",iconBg:"transparent",textBg:"transparent",text:"#fed12e",outline:"#fed12e"},"orange-outline":{bg:"transparent",iconBg:"transparent",textBg:"transparent",text:"coral",outline:"coral"}}}},{key:"setColorTheme",value:function(e){return this.themes[e]?(this.colors=this.themes[e],this.currentTheme=e,this.colors):null}},{key:"setColors",value:function(e){if("object"!==n(e))throw new TypeError("Expected setColors argument to be an object");this.colors=e}},{key:"create",value:function(e,t){var n=this;return new Promise(function(r){t&&(n.colors=t),n.colors||(n.colors=n.themes.greyscale),n.createCanvas(e).toBlob(function(e){var t=n.blobToImg(e);r(t)})})}},{key:"blobToImg",value:function(e){if(!(e instanceof Blob))throw new Error("Invalid Argument Exception. blobToImg expected blob");var t=URL.createObjectURL(e),n=document.createElement("img");return this.currentTheme&&(n.dataset.theme=this.currentTheme),n.src=t,n.onload=function(){URL.revokeObjectURL(e)},n}},{key:"createCanvas",value:function(t){var n=document.createElement("canvas");n.width=384,n.height=512;var r=n.getContext("2d");return e.drawBg(n,r,this.colors.bg),e.drawIcon(n,r,this.colors.iconBg,this.colors.outline),e.drawTextBg(n,r,this.colors.textBg),e.drawText(n,r,t,this.colors.text),n}}])&&r(t.prototype,o),i&&r(t,i),e}();t.o=o}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return o[e].call(n.exports,n,n.exports,a),n.exports}a.m=o,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var o=Object.create(null);a.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&r&&n;("object"==typeof l||"function"==typeof l)&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach(e=>i[e]=()=>n[e]);return i.default=()=>n,a.d(o,i),o},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce((t,n)=>(a.f[n](e,t),t),[])),a.u=e=>"utils/"+({614:"heic2any",854:"pdfjs"}[e]||e)+".js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="@aslamhus/fileselect:",a.l=(e,t,o,i)=>{if(n[e])n[e].push(t);else{var l,c;if(void 0!==o)for(var u=document.getElementsByTagName("script"),s=0;s<u.length;s++){var f=u[s];if(f.getAttribute("src")==e||f.getAttribute("data-webpack")==r+o){l=f;break}}l||(c=!0,(l=document.createElement("script")).charset="utf-8",a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",r+o),l.src=e),n[e]=[t];var p=(t,r)=>{l.onerror=l.onload=null,clearTimeout(d);var o=n[e];if(delete n[e],l.parentNode&&l.parentNode.removeChild(l),o&&o.forEach(e=>e(r)),t)return t(r)},d=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),c&&document.head.appendChild(l)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{a.b="undefined"!=typeof document&&document.baseURI||self.location.href;var e={865:0};a.f.j=(t,n)=>{var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise((n,o)=>r=e[t]=[n,o]);n.push(r[2]=o);var i=a.p+a.u(t),l=new Error;a.l(i,n=>{if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",l.name="ChunkLoadError",l.type=o,l.request=i,r[1](l)}},"chunk-"+t,t)}};var t=(t,n)=>{var r,o,[i,l,c]=n,u=0;if(i.some(t=>0!==e[t])){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(c)c(a)}for(t&&t(n);u<i.length;u++)o=i[u],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.webpackChunk_aslamhus_fileselect=self.webpackChunk_aslamhus_fileselect||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var l={};a.r(l),a.d(l,{FileSelect:()=>F});var c=a(531);function u(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof l?r:l,u=Object.create(c.prototype);return f(u,"_invoke",function(n,r,o){var i,l,c,u=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return i=t,l=0,c=e,p.n=n,a}};function d(n,r){for(l=n,c=r,t=0;!f&&u&&!o&&t<s.length;t++){var o,i=s[t],d=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=n<2&&d<i[1])?(l=0,p.v=r,p.n=i[1]):d<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,l=0))}if(o||n>1)return a;throw f=!0,r}return function(o,s,v){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,v),l=s,c=v;(t=l<2?e:c)||!f;){i||(l?l<3?(l>1&&(p.n=-1),d(l,c)):p.n=c:p.v=c);try{if(u=2,i){if(l||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=i.return)&&t.call(i),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);i=e}else if((t=(f=p.n<0)?c:n.call(r,p))!==a)break}catch(t){i=e,l=1,c=t}finally{u=1}}return{value:t,done:f}}}(n,o,i),!0),u}var a={};function l(){}function c(){}function u(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(f(t={},r,function(){return this}),t),d=u.prototype=l.prototype=Object.create(p);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,f(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,f(d,"constructor",u),f(u,"constructor",c),c.displayName="GeneratorFunction",f(u,o,"GeneratorFunction"),f(d),f(d,o,"Generator"),f(d,r,function(){return this}),f(d,"toString",function(){return"[object Generator]"}),(s=function(){return{w:i,m:v}})()}function f(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}f=function(e,t,n,r){function i(t,n){f(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},f(e,t,n,r)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function g(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){h(i,r,o,a,l,"next",e)}function l(e){h(i,r,o,a,l,"throw",e)}a(void 0)})}}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}var F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fileInput:!0,onReaderProgress:null,onReadFileComplete:null,onInvalidType:null,onFileSizeLimitExceeded:null,multiple:null,colors:null,theme:null,fileSize:null,preview:{backgroundImage:!1}};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fileIcon=new c.o({colors:n.colors,theme:n.theme}),this.svg={},this.fileList=[],this.preview=n.preview,this.onInvalidType=n.onInvalidType,this.onFileSizeLimitExceeded=n.onFileSizeLimitExceeded,this.fileSize=n.fileSize||1e8,this.multiple=!1!==n.multiple,this.validateArguments(t,n),this.getPreview=this.getPreview.bind(this)}return t=e,n=[{key:"validateArguments",value:function(e,t){var n,r=t.fileInput;!1!==r&&(this.fileInput=r,null!==(n=this.fileInput)&&void 0!==n&&n.tagName||(this.fileInput=document.querySelector(r)||document.querySelector("input[type=file]")||this.createFileInput())),this.allowedTypes=e||"*"}},{key:"setFileSizeLimit",value:function(e){if(isNaN(e))throw new Error("Invalid Argument. setFileSizeLimit expected number but found "+b(e));this.fileSize=e}},{key:"createFileInput",value:function(){return this.fileInput=document.createElement("input"),this.fileInput.type="file",this.fileInput.id=Date.now(),this.fileInput.style.display="none",this.multiple&&(this.fileInput.multiple="true"),document.body.append(this.fileInput),this.fileInput}},{key:"fileSelected",value:(d=g(s().m(function e(t){var n,r;return s().w(function(e){for(;;)switch(e.n){case 0:return t.target?(t.stopPropagation(),t.preventDefault(),r=p(t.target.files,1),n=r[0]):n=t,e.n=1,this.handleFile(n,this.allowedTypes);case 1:if(!e.v){e.n=2;break}return e.a(2,!0);case 2:return e.a(2,!0)}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"select",value:function(){var e=this;return new Promise(function(t,n){e.fileInput||n(new Error("Invalid Argument Exception - no file element found.")),e.fileInput.onclick=function(e){return e.stopPropagation()},e.fileInput.onchange=function(r){var o=r.target.files,i=Array.from(o);e.fileList=[].concat(u(e.fileList),u(o));for(var a=0,l=i;a<l.length;a++){var c=l[a],s=e.checkFileTypes(c,e.allowedTypes);if(s.valid||n(new Error(s.message)),c.size>e.fileSize){var f=new Error("Failed to select file, File size exceeded limit");e.onFileSizeLimitExceeded instanceof Function&&e.onFileSizeLimitExceeded(f,c.size,e.fileSize),n(f)}}o.toArray=function(){return Array.from(this)},o.readFiles=function(){return Promise.resolve(e.readFiles(i))},o.getPreviews=function(){return Promise.all(i.map(function(t){return e.getPreview(t)}))},o.getIcons=function(){return Promise.all(i.map(function(t){return e.getIcon(t)}))},t(o)},e.fileInput.click()})}},{key:"getFiles",value:function(){return this.fileList}},{key:"removeFiles",value:function(){return this.fileList=[],this.fileInput.value=null,this.fileList}},{key:"readFiles",value:(f=g(s().m(function e(t){var n,r=this;return s().w(function(e){for(;;)switch(e.n){case 0:if(n=[],null==t||!t.length){e.n=2;break}return Object.values(t).forEach(function(e){e instanceof File&&n.push(r.handleFile(e,r.allowedTypes))}),e.n=1,Promise.all(n);case 1:case 3:return e.a(2,e.v);case 2:return e.n=3,this.handleFile(t,this.allowedTypes)}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"handleFile",value:function(t,n){var r=this;return new Promise(function(o,i){"object"===b(t)&&t instanceof File||i(new Error("Invalid Argument Exception. Expected instance of File but found "+b(t)));var a=t,l=void 0!==(null==t?void 0:t.name)?null==t?void 0:t.name.replace(/(?=\.[^.]+$)/,"-".concat(Date.now())):Date.now();l=l.replace(/\s+/g,"-"),a.uuid=l;var c=r.checkFileTypes(t,r.allowedTypes||n);c.valid||i(new Error(c.message)),t.size>r.fileSize&&i(new Error("Failed to handle file, File size exceeded limit")),t.type.toLowerCase().includes("heic")||t.type.toLowerCase().includes("heif")?t.heicConvert?t.heicConvert.then(function(t){var n=e.blobToFile(t,a);r.readFile(n,o,i)}):(t.heicConvert=e.getHEICBlob(a),t.heicConvert.then(function(t){var n=e.blobToFile(t,a);r.readFile(n,o,i)})):r.readFile(t,o,i)})}},{key:"getIcon",value:(l=g(s().m(function t(n){var r,o,i,a,l,c,u;return s().w(function(t){for(;;)switch(t.n){case 0:if(o=n.type.split("/"),i=p(o,1),a=i[0],l=e.getExtensionFromFilename(null==n?void 0:n.name),!this.svg.hasOwnProperty("default")&&!this.svg.hasOwnProperty(a)){t.n=2;break}return c=this.svg.default||this.svg[a],t.n=1,e.createSVGBlob(c);case 1:u=t.v,(r=document.createElement("img")).src=URL.createObjectURL(u),r.onload=URL.revokeObjectURL(u),t.n=4;break;case 2:return t.n=3,this.fileIcon.create(l);case 3:r=t.v;case 4:return t.a(2,r)}},t,this)})),function(e){return l.apply(this,arguments)})},{key:"getPreview",value:(i=g(s().m(function t(n){var r,o,i,a,l,c,u,f,d,v,h,g,m,y;return s().w(function(t){for(;;)switch(t.n){case 0:if(n&&"object"===b(n)&&n instanceof File){t.n=1;break}throw new Error("Type Error. getPreview expected file object");case 1:if(i=n.type.split("/"),a=p(i,2),l=a[0],c=a[1],"image/heic"!==n.type&&"image/heif"!==n.type){t.n=3;break}return n.heicConvert=e.getHEICBlob(n),t.n=2,n.heicConvert;case 2:o=t.v,u=e.blobToFile(o,n),n.heicConvert=u,t.n=4;break;case 3:"image"===l||"video"===l||"audio"===l||"pdf"===c||"text/plain"===n.type?o=n:(console.warn("unrecognized file type: ".concat(n.type)),o=null);case 4:d=n,o?d=URL.createObjectURL(o):f=e.createNoPreview(),y=l,t.n="application"===y?5:"text"===y?9:"video"===y?13:"audio"===y?14:"image"===y?15:16;break;case 5:if("pdf"!==c){t.n=7;break}return t.n=6,e.getPDF(d);case 6:h=t.v,g=(null==this||null===(v=this.preview)||void 0===v?void 0:v.backgroundImage)||null,f=g?e.createBackgroundImageDiv(h,n.type):e.createImg(h),t.n=8;break;case 7:f=e.createNoPreview();case 8:return t.a(3,17);case 9:if("plain"!==c){t.n=11;break}return t.n=10,n.text();case 10:m=t.v,(f=document.createElement("div")).style.padding="15px",f.textContent=m,t.n=12;break;case 11:f=e.createNoPreview();case 12:return t.a(3,17);case 13:return(f=document.createElement("video")).preload="",f.src=d,f.controls=!0,t.a(3,17);case 14:return f=e.createAudioElement(d,n.type),t.a(3,17);case 15:return f=null!=this&&null!==(r=this.preview)&&void 0!==r&&r.backgroundImage?e.createBackgroundImageDiv(d,n.type):e.createImg(d),t.a(3,17);case 16:f=e.createNoPreview();case 17:return f&&"audio"!==l&&"image"!==l&&"application"!==l&&(f.onload=function(){URL.revokeObjectURL(d)}),f&&(f.dataset.mimetype=l,f.dataset.subtype=c),t.a(2,f)}},t,this)})),function(e){return i.apply(this,arguments)})},{key:"checkFileTypes",value:function(t,n){var r=t.type;if("*"===n)return{valid:!0};var o=e.getTypeList(n||this.allowedTypes),i=r.split("/")[0];return o.types.includes("".concat(i,"/*"))?{valid:!0}:(o.types.includes(r)?o.valid=!0:(o.valid=!1,this.onInvalidType instanceof Function&&this.onInvalidType.call(null,o)),o)}},{key:"readFile",value:function(e,t,n){var r,o,i=this,a=new FileReader;a.onprogress=function(t){t.lengthComputable&&parseInt(t.loaded/t.total*100,10),i.progress(t,e)},a.onload=(o=e,function(e){var n=e.target.result;r={name:o.name,type:o.type,size:o.size,uuid:o.uuid,data:n},i.readFileComplete(r),t(r)}),a.onerror=function(e){var t;switch(e.target.error.code){case e.target.error.NOT_FOUND_ERR:t="File not found!";break;case e.target.error.NOT_READABLE_ERR:t="File not readable!";break;case e.target.error.ABORT_ERR:t="Read operation was aborted!";break;case e.target.error.SECURITY_ERR:t="File is in a locked state!";break;case e.target.error.ENCODING_ERR:t='The file is too long to encode in a "data://" URL.';break;default:t="Read error."}console.error("Read File Error:",t),n(t)},a.readAsDataURL(e)}},{key:"progress",value:function(e,t){this.onReaderProgress instanceof Function&&this.onReaderProgress.call(t,e)}},{key:"readFileComplete",value:function(e){this.onFileReadComplete instanceof Function&&this.onFileReadComplete.call(this,e)}}],r=[{key:"createImg",value:function(e){var t=document.createElement("img");return t.onload=function(){URL.revokeObjectURL(e)},t.src=e,t}},{key:"createNoPreview",value:function(){return null}},{key:"createBackgroundImageDiv",value:function(e,t){var n=document.createElement("div");return n.dataset.src=e,n.dataset.type=t,n.style.backgroundImage="url(".concat(e,")"),n.style.backgroundPosition="top left",n.style.backgroundSize="contain",n.style.backgroundRepeat="no-repeat",n}},{key:"createAudioElement",value:function(e,t){var n=document.createElement("audio");n.controls="controls",n.preload="metadata",n.classList.add("test"),n.oncanplaythrough=function(){},n.onplay=function(){document.querySelectorAll("audio").forEach(function(e){e!==n&&e.pause()})};var r=document.createElement("source");return r.src=e,r.type=t,n.append(r),n}},{key:"getExtensionFromFilename",value:function(e){return e.match(/\.[0-9A-Z]+$/i)}},{key:"getHEICBlob",value:(o=g(s().m(function e(t){var n,r,o;return s().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a.e(614).then(a.t.bind(a,816,23));case 1:return n=e.v,r=n.default,e.n=2,r({blob:t,toType:"image/jpeg",quality:.5}).then(function(e){return e}).catch(function(e){return console.error("Failed to get blob for heic file. Error: ".concat(e)),!1});case 2:return o=e.v,e.a(2,o)}},e)})),function(e){return o.apply(this,arguments)})},{key:"blobToFile",value:function(e,t){var n=e.type.split("/")[1],r=((null==t?void 0:t.uuid)||(null==t?void 0:t.name)).replace(/(HEIC)/,n),o=new File([e],r,{type:e.type});return o.uuid=r,o}},{key:"createSVGBlob",value:function(e){return new Promise(function(t){t(new Blob([e],{type:"image/svg+xml"}))})}},{key:"getPDF",value:function(e){return new Promise(function(t){return a.e(854).then(a.bind(a,352)).then(function(n){if(void 0===n)throw new Error("couldn't initialize pdf.js library");n.getDocument(e).promise.then(function(e){e.getPage(1).then(function(e){var n=e.getViewport({scale:1}),r=document.createElement("canvas");r.style.cssText="\n                           position:relative;\n                           width:100%;\n                           height:auto;\n                           margin:0px auto;\n                           top:50%;\n                           transform: translateY(-50%);";var o=r.getContext("2d");r.height=n.height,r.width=n.width;var i={canvasContext:o,viewport:n};e.render(i).promise.then(function(){r.toBlob(function(e){var n=URL.createObjectURL(e);t(n)})})})})})})}},{key:"getTypeList",value:function(e){var t=e;"string"==typeof t&&(t=[t]);var n=t.map(function(e){return e}),r=[],o=[];return n.length>0&&Object.values(n).forEach(function(e){r.push(e);var t=e.split("/");o.push(".".concat(t[1]))}),{message:o.reduce(function(e,t,n){return 0===n?e+t:n===o.length-1?"".concat(e," or ").concat(t):"".concat(e,", ").concat(t)},"File type must be "),types:r}}}],n&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r,o,i,l,f,d}();return l})());
//# sourceMappingURL=FileSelect.js.map